# ontology-editor

## Dev Setup


### A. GitHub Setup

1. Create an OAuth app: https://github.com/settings/applications/new
1. Homepage / Callback : `http://localhost:3000/`
1. Fill the env vars in `.env`:
    ```
    OAUTH_CLIENT_ID=6bac5524e0e11f1ae9ec
    OAUTH_CLIENT_SECRET=b5d15ea361b1d28a44152599c72621a36c631751
    ```

### B. Local Setup

1. `npm install`
1. Run the project:
  * Database and GraphQL API:
      * `make up`
  * Front dev server + watch:
    1. Export all environment variables from `./docker-app-dev/.env`
        * If you only want to watch the front (you probably do): `npm run dev`
        * If you want to watch the front AND the API: `npm run dev-api`

Whenever you feel like it:

* Deleting the DB to start over:
    * `make reset`

### Helpful Tools

- Vue devtools extension [Chrome, Firefox](https://github.com/vuejs/vue-devtools#installation)
- Local GraphQL IDE: [Graph*i*QL `http://localhost:5000/graphiql`](http://localhost:5000/graphiql)
- A postgres client (e.g. [Postico](https://eggerapps.at/postico/) for MacOS) to inspect schemas and data
- Apollo devtools extension [Chrome, Firefox](https://github.com/apollographql/apollo-client-devtools#apollo-client-devtools)

## Architecture

* A GraphQL API backed by Postgres, generated by introspecting the pg schema.
* A Nuxt app, using Apollo as GraphQL client.
* A Server Middleware implemented as an Express API
  * This is where the forge-specific functionality (GitHub, GitLab, â€¦) is implemented
  * Configurable via `nuxt.config.js`

### To Consider

* Should the forge-specific functionalities implemented as a GraphQL endpoint?
  * How does Apollo support multiple endpoints?
  * https://www.prisma.io/blog/how-to-wrap-a-rest-api-with-graphql-8bf3fb17547d/
  * https://medium.com/@sastraxi/authenticated-and-stitched-schemas-with-postgraphile-passport-and-stripe-a51490a858a2
  * https://www.apollographql.com/docs/graphql-tools/schema-stitching.html

## References

* GraphQL: https://graphql.org/learn/
* Postgraphile: https://www.graphile.org/postgraphile/introduction/
* Nuxt: https://nuxtjs.org/guide/installation
    * Apollo: https://github.com/nuxt-community/apollo-module
    * Auth: https://auth.nuxtjs.org/
